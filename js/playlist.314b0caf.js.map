{"version":3,"sources":["webpack:///./src/views/Playlist.vue","webpack:///./src/components/SongCard.vue","webpack:///./src/components/SongCard.vue?40a6","webpack:///./src/views/Playlist.vue?ded4","webpack:///./src/views/Playlist.vue?fa2e","webpack:///./src/components/SongCard.vue?d50f"],"names":["class","style","loading","msg","mediaForCheckout","length","disabled","goToCheckout","playlist","song","idx","addCheckout","removeCheckout","draggable","key","setDragItem","dropItem","displayNum","selected","type","checked","e","setSelected","emitCheckout","media","artworkUrl60","playSound","srcElement","width","height","isPlaying","trackId","goToAlbum","trackName","filterArtist","artistId","artistName","name","props","Object","Number","components","Options","methods","this","$emit","setup","store","data","addToPlaylist","cutLength","target","tagName","toLowerCase","trackIsPlaying","state","id","dataOfPlaying","render","__scopeId","SongCard","Loading","playlistData","dragDropItem","dispatch","i","findIndex","splice","unshift","item","indexOfDragItem","indexOf","indexOfDestination","index","indexUpdatePromises","end","push","user","username","Promise","all","catch","err","console","log"],"mappings":"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","file":"js/playlist.314b0caf.js","sourcesContent":["<template>\r\n  <div>\r\n      <Loading v-if=\"loading\" :msg=\"`Retrieving your playlist`\" />\r\n      <div class=\"page-title-container\">\r\n        <div class=\"page-title\">Playlist</div>\r\n      </div>\r\n      <section>\r\n        <div style=\"text-align: right;\">\r\n            Selected songs: ({{mediaForCheckout.length}})\r\n            <button \r\n                class=\"btn btn-success\" \r\n                :disabled=\"!mediaForCheckout.length\" \r\n                @click=\"goToCheckout\">\r\n                    Go to checkout\r\n            </button>\r\n        </div>\r\n        <div class=\"playlist-normal\">\r\n            <SongCard \r\n                v-for=\"(song, idx) in playlist\" \r\n                @add-checkout=\"addCheckout(song)\" \r\n                @remove-checkout=\"removeCheckout(song)\" \r\n                draggable=\"true\" \r\n                :key=\"idx\" \r\n                v-on:dragstart=\"setDragItem(song)\" \r\n                v-on:dragover.prevent v-on:drop=\"dropItem(song)\" \r\n                :song=\"song\" \r\n                :displayNum=\"idx+1\"/>\r\n        </div>  \r\n      </section>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n    section {\r\n        margin: 0 3rem;\r\n        > * {\r\n            margin-bottom: .5em;\r\n            .btn-success {\r\n                background-color: #292b2c;\r\n                border-color: transparent;\r\n                &:hover {\r\n                    background-color: #42b983;\r\n                }\r\n            }\r\n            .btn {\r\n                opacity: 1;\r\n            }\r\n        }\r\n        > div {\r\n            > button {\r\n                font-size: small;\r\n            }\r\n        }\r\n        .playlist-normal {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            justify-content: flex-start;\r\n            overflow-x: auto;\r\n            @media (max-width: 652px) {\r\n                justify-content: center;\r\n            }\r\n        }\r\n    }\r\n\r\n</style>\r\n\r\n<script>\r\n    import { onBeforeMount, reactive, toRefs, computed } from 'vue'\r\n    import { playSound, getPlaylist, updatePlaylist } from '@/shared/logic'\r\n    import SongCard from '@/components/SongCard.vue'\r\n    import Loading from '@/components/Loading.vue'\r\n    import { goToAlbum, filterArtist, goToCheckout } from '@/shared/navigation'\r\n    import { useStore } from 'vuex'\r\n\r\n    export default {\r\n        name: \"playlist\",\r\n        components: {\r\n            SongCard,\r\n            Loading\r\n        },\r\n        setup() {\r\n            const store = useStore();\r\n            let playlistData = reactive({\r\n                loading: true,\r\n                playlist: computed(() => store.state.playlist),\r\n                mediaForCheckout: [],\r\n                playSound,\r\n                goToAlbum,\r\n                dragDropItem: {},\r\n                goToCheckout: async () => {\r\n                    await store.dispatch('setCheckoutItems', playlistData.mediaForCheckout);\r\n                    goToCheckout();\r\n                },\r\n                removeCheckout: ({ trackId: id = \"\"} = {}) => {\r\n                    let i = playlistData.mediaForCheckout.findIndex(({trackId}={}) => trackId === id); \r\n                    playlistData.mediaForCheckout.splice(i,1);\r\n                },\r\n                addCheckout: (song) => { playlistData.mediaForCheckout.unshift(song) },\r\n                dropItem: (item) => {\r\n                    \r\n                    // Remove the moved song from its original index\r\n                    const indexOfDragItem = playlistData.playlist.indexOf(playlistData.dragDropItem);\r\n                    playlistData.playlist.splice(indexOfDragItem, 1);\r\n\r\n                    // Add the moved song to the desired location and update its index to update the db\r\n                    const indexOfDestination = playlistData.playlist.indexOf(item);\r\n                    playlistData.playlist.splice(indexOfDestination, 0, playlistData.dragDropItem);\r\n                    playlistData.playlist[indexOfDestination].index = indexOfDestination;\r\n\r\n                    const indexUpdatePromises = [];\r\n                    // Only update the song indeces that were effected\r\n                    let i = indexOfDestination < indexOfDragItem ? indexOfDestination : indexOfDragItem;\r\n                    let end = indexOfDestination < indexOfDragItem ? indexOfDragItem : indexOfDestination;\r\n                    for (i; i <= end; i++) {\r\n                        // re-sync the indeces of each song for db update\r\n                        playlistData.playlist[i].index = i; \r\n                        indexUpdatePromises.push(\r\n                            updatePlaylist(store.state.user.username, { song: playlistData.playlist[i] })\r\n                        );\r\n                    }\r\n                    Promise.all(indexUpdatePromises)\r\n                        .catch(err => {\r\n                            console.log('error', err);\r\n                        })\r\n                },\r\n                setDragItem: (item) => { playlistData.dragDropItem = item },\r\n                filterArtist\r\n            });\r\n            \r\n            onBeforeMount(async () => {\r\n                try {\r\n                    await getPlaylist();\r\n                    playlistData.loading = false;\r\n                    if (!playlistData.playlist.length) {\r\n                        store.dispatch(\"addToast\", { key: \"playlist-alert\", msg: \"This page will be empty until you add songs to your playlist\"});\r\n                    }\r\n                    \r\n                } catch (err) {\r\n                    console.log('Failed getting playlist', err);\r\n                }\r\n\r\n            });\r\n\r\n            return {\r\n                ...toRefs(playlistData)\r\n            }\r\n        }\r\n    }\r\n</script>","<template>\r\n  <div class=\"playlist-single-track\">\r\n      <div class=\"fav-num-container\">\r\n        <div v-if=\"!selected\" @click.prevent=\"(e)=>{setSelected(e); emitCheckout(selected);}\" class=\"fav-num small-font\" style=\"cursor: pointer;\">\r\n          <span>{{displayNum}}</span>\r\n        </div>\r\n        <div v-else>\r\n          <input type=\"checkbox\" :checked=\"selected\" @click.prevent=\"(e)=>{setSelected(e); emitCheckout(selected);}\" class=\"fav-num small-font\"/>\r\n        </div>\r\n          <Options :media=\"song\" type=\"song-cart\"/>  \r\n      </div>\r\n\r\n      <div class=\"album-art\" :style=\"{ 'background-image': 'url(' + song.artworkUrl60 + ')' }\" @click.prevent=\"(e)=>{playSound(song, e.srcElement)}\">\r\n          <img width=\"60\" height=\"60\" style=\"display: block;\" :class=\"{ 'play' : !isPlaying(song.trackId), 'stop' : isPlaying(song.trackId) }\">\r\n      </div>\r\n\r\n      <div class=\"name-artist\">\r\n          <span class=\"song-name\" @click.prevent=\"goToAlbum(song)\"><strong>{{song.trackName}}</strong></span><br>\r\n          <span class=\"artist-name link\" @click.prevent=\"filterArtist(song.artistId)\">{{song.artistName}}</span><br>\r\n      </div>\r\n  </div> \r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { addToPlaylist, cutLength, playSound } from '@/shared/logic'\r\nimport { goToAlbum, filterArtist } from '@/shared/navigation'\r\nimport Options from '@/components/ContentOptions.vue'\r\n\r\nexport default {\r\n  name: \"SongCard\",\r\n  props: {\r\n    song: Object,\r\n    displayNum: Number\r\n  },\r\n  components: {\r\n      Options\r\n  },\r\n  methods: {\r\n    emitCheckout(selected) {this.$emit(selected ? 'add-checkout' : 'remove-checkout')}\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n    const data = reactive({\r\n      selected: false,\r\n      song: props.song,\r\n      displayNum: props.displayNum,\r\n      playSound,\r\n      addToPlaylist,\r\n      goToAlbum,\r\n      cutLength,\r\n      filterArtist,\r\n      setSelected: (e) => {\r\n        let selected = (e.target.tagName.toLowerCase() !== \"input\"); \r\n        data.selected = selected; \r\n      },\r\n      trackIsPlaying: computed(() => store.state.isPlaying),\r\n      isPlaying: id => data.trackIsPlaying && id === store.state.dataOfPlaying.trackId\r\n    });\r\n\r\n    return { ...toRefs(data) };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n   .fav-num-container {\r\n        width: 100%;\r\n        height: 20px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        vertical-align: text-top;\r\n    }\r\n\r\n    .fav-num {\r\n        /* padding: .25rem .5rem 0 .5rem; */\r\n        width: 20px;\r\n        background-color: #292b2c;\r\n        color: #f7f7f7;\r\n        border-radius: .3rem;\r\n    }\r\n    .name-artist {\r\n        text-align: left;\r\n        padding: 1em;\r\n    }\r\n\r\n    .playlist-single-track {\r\n        border-top: 1px solid #292b2c;\r\n        border-right: 1px solid #292b2c;\r\n        width: 180px;\r\n    }\r\n    .album-art {\r\n        margin: auto;\r\n        width: 60px;\r\n    }\r\n</style>\r\n","import { render } from \"./SongCard.vue?vue&type=template&id=b396d348&scoped=true\"\nimport script from \"./SongCard.vue?vue&type=script&lang=js\"\nexport * from \"./SongCard.vue?vue&type=script&lang=js\"\n\nimport \"./SongCard.vue?vue&type=style&index=0&id=b396d348&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-b396d348\"\n\nexport default script","import { render } from \"./Playlist.vue?vue&type=template&id=33cf12ea&scoped=true\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js\"\n\nimport \"./Playlist.vue?vue&type=style&index=0&id=33cf12ea&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-33cf12ea\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Playlist.vue?vue&type=style&index=0&id=33cf12ea&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SongCard.vue?vue&type=style&index=0&id=b396d348&scoped=true&lang=css\""],"sourceRoot":""}